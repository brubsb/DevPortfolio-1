{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<section id="home" class="hero-section">
    <div class="hero-background">
        <div class="particles"></div>
        <img src="{{ url_for('static', filename='images/hero-bg.svg') }}" alt="" class="hero-bg-image">
    </div>
    
    <div class="container">
        <div class="row align-items-center min-vh-100">
            <div class="col-lg-6" data-aos="fade-right" data-aos-duration="1000">
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span class="text-primary">Olá, eu sou</span><br>
                        <span class="typing-text" data-text="Desenvolvedor Full Stack"></span>
                    </h1>
                    <p class="hero-subtitle">
                        Transformo ideias em soluções digitais modernas e funcionais. 
                        Especializado em desenvolvimento web com React, Node.js e Python.
                    </p>
                    <div class="hero-buttons">
                        <a href="#portfolio" class="btn btn-primary btn-lg me-3 smooth-scroll">
                            <i class="fas fa-folder-open me-2"></i>Ver Portfolio
                        </a>
                        <a href="#contact" class="btn btn-outline-light btn-lg smooth-scroll">
                            <i class="fas fa-envelope me-2"></i>Contato
                        </a>
                    </div>
                    <div class="hero-stats mt-5">
                        <div class="stat-item">
                            <div class="stat-number" data-count="50">0</div>
                            <div class="stat-label">Projetos</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" data-count="3">0</div>
                            <div class="stat-label">Anos Experiência</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" data-count="100">0</div>
                            <div class="stat-label">% Satisfação</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6" data-aos="fade-left" data-aos-duration="1000" data-aos-delay="200">
                <div class="hero-image">
                    <div class="image-container">
                        <img src="https://pixabay.com/get/g10d06ed164e55be8da886a7321a1f887ee4d37da3a4579fe421bdf4cc44eb0bb851e95f65d9bd14cf00cf5b68e3f2242a9fad5d6456a6dcb81e4460d823edfce_1280.jpg" 
                             alt="Developer Portrait" class="profile-image">
                        <div class="floating-elements">
                            <div class="floating-tech" style="--delay: 0s;">
                                <i class="fab fa-react"></i>
                            </div>
                            <div class="floating-tech" style="--delay: 1s;">
                                <i class="fab fa-node-js"></i>
                            </div>
                            <div class="floating-tech" style="--delay: 2s;">
                                <i class="fab fa-python"></i>
                            </div>
                            <div class="floating-tech" style="--delay: 3s;">
                                <i class="fas fa-database"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="scroll-indicator">
        <div class="scroll-arrow">
            <i class="fas fa-chevron-down"></i>
        </div>
    </div>
</section>

<!-- About Section -->
<section id="about" class="about-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center" data-aos="fade-up">
                <h2 class="section-title">Sobre Mim</h2>
                <p class="section-subtitle">Conheça minha trajetória e paixão por tecnologia</p>
            </div>
        </div>
        
        <div class="row align-items-center">
            <div class="col-lg-6" data-aos="fade-right" data-aos-duration="1000">
                <div class="about-image">
                    <img src="https://pixabay.com/get/g643bb95fcb67151cba9a81dfe2a239792a0a067285550c175060c1f733b59096a77319ab5d6f888cd0a082056a8151295d6b4a68d2f5b88ced37fc3f97db149c_1280.jpg" 
                         alt="Developer Workspace" class="img-fluid rounded-4">
                </div>
            </div>
            <div class="col-lg-6" data-aos="fade-left" data-aos-duration="1000" data-aos-delay="200">
                <div class="about-content">
                    <h3 class="mb-4">Desenvolvedor Apaixonado por Criar Soluções</h3>
                    <p class="mb-4">
                        Sou um desenvolvedor full stack com mais de 3 anos de experiência criando 
                        aplicações web modernas e eficientes. Minha jornada começou com curiosidade 
                        sobre como as coisas funcionam na internet, e se transformou em uma paixão 
                        por resolver problemas complexos através do código.
                    </p>
                    <p class="mb-4">
                        Especializo-me em tecnologias como React, Node.js, Python e bancos de dados 
                        modernos. Adoro trabalhar em projetos desafiadores que me permitem aprender 
                        novas tecnologias e criar soluções inovadoras.
                    </p>
                    
                    <div class="about-highlights">
                        <div class="highlight-item">
                            <i class="fas fa-code text-primary"></i>
                            <div>
                                <h5>Código Limpo</h5>
                                <p>Foco em escrever código maintível e bem documentado</p>
                            </div>
                        </div>
                        <div class="highlight-item">
                            <i class="fas fa-mobile-alt text-primary"></i>
                            <div>
                                <h5>Responsive Design</h5>
                                <p>Aplicações que funcionam perfeitamente em todos os dispositivos</p>
                            </div>
                        </div>
                        <div class="highlight-item">
                            <i class="fas fa-rocket text-primary"></i>
                            <div>
                                <h5>Performance</h5>
                                <p>Otimização para velocidade e experiência do usuário</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Skills Section -->
<section id="skills" class="skills-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center" data-aos="fade-up">
                <h2 class="section-title">Habilidades</h2>
                <p class="section-subtitle">Tecnologias e ferramentas que domino</p>
            </div>
        </div>
        
        <!-- Skills Carousel -->
        <div class="row" data-aos="fade-up" data-aos-delay="200">
            <div class="col-lg-12">
                <div id="skillsCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
                    <div class="carousel-inner">
                        <!-- Frontend Skills Slide -->
                        <div class="carousel-item active">
                            <div class="skills-carousel-slide">
                                <div class="skills-category-header text-center mb-4">
                                    <i class="fas fa-palette text-primary"></i>
                                    <h3 class="category-title">Frontend Development</h3>
                                    <p class="category-subtitle">Criando interfaces modernas e interativas</p>
                                </div>
                                <div class="skills-grid">
                                    {% for skill in frontend_skills %}
                                    <div class="skill-card glass-card">
                                        <div class="skill-icon">
                                            <i class="{{ skill.icon_class }}"></i>
                                        </div>
                                        <h5 class="skill-name">{{ skill.name }}</h5>
                                        <div class="skill-level">
                                            <div class="level-indicator level-{{ (skill.proficiency // 20) + 1 }}">
                                                {% for i in range(5) %}
                                                <div class="dot {{ 'filled' if i < (skill.proficiency // 20) else '' }}"></div>
                                                {% endfor %}
                                            </div>
                                            <span class="level-text">{{ skill.proficiency }}%</span>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Backend Skills Slide -->
                        <div class="carousel-item">
                            <div class="skills-carousel-slide">
                                <div class="skills-category-header text-center mb-4">
                                    <i class="fas fa-server text-primary"></i>
                                    <h3 class="category-title">Backend Development</h3>
                                    <p class="category-subtitle">Construindo APIs robustas e escaláveis</p>
                                </div>
                                <div class="skills-grid">
                                    {% for skill in backend_skills %}
                                    <div class="skill-card glass-card">
                                        <div class="skill-icon">
                                            <i class="{{ skill.icon_class }}"></i>
                                        </div>
                                        <h5 class="skill-name">{{ skill.name }}</h5>
                                        <div class="skill-level">
                                            <div class="level-indicator level-{{ (skill.proficiency // 20) + 1 }}">
                                                {% for i in range(5) %}
                                                <div class="dot {{ 'filled' if i < (skill.proficiency // 20) else '' }}"></div>
                                                {% endfor %}
                                            </div>
                                            <span class="level-text">{{ skill.proficiency }}%</span>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tools Skills Slide -->
                        <div class="carousel-item">
                            <div class="skills-carousel-slide">
                                <div class="skills-category-header text-center mb-4">
                                    <i class="fas fa-tools text-primary"></i>
                                    <h3 class="category-title">Ferramentas & DevOps</h3>
                                    <p class="category-subtitle">Otimizando fluxo de desenvolvimento</p>
                                </div>
                                <div class="skills-grid">
                                    {% for skill in tools_skills %}
                                    <div class="skill-card glass-card">
                                        <div class="skill-icon">
                                            <i class="{{ skill.icon_class }}"></i>
                                        </div>
                                        <h5 class="skill-name">{{ skill.name }}</h5>
                                        <div class="skill-level">
                                            <div class="level-indicator level-{{ (skill.proficiency // 20) + 1 }}">
                                                {% for i in range(5) %}
                                                <div class="dot {{ 'filled' if i < (skill.proficiency // 20) else '' }}"></div>
                                                {% endfor %}
                                            </div>
                                            <span class="level-text">{{ skill.proficiency }}%</span>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Carousel Controls -->
                    <button class="carousel-control-prev" type="button" data-bs-target="#skillsCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Anterior</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#skillsCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Próximo</span>
                    </button>
                    
                    <!-- Carousel Indicators -->
                    <div class="carousel-indicators">
                        <button type="button" data-bs-target="#skillsCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Frontend"></button>
                        <button type="button" data-bs-target="#skillsCarousel" data-bs-slide-to="1" aria-label="Backend"></button>
                        <button type="button" data-bs-target="#skillsCarousel" data-bs-slide-to="2" aria-label="Tools"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Portfolio Section -->
<section id="portfolio" class="portfolio-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center" data-aos="fade-up">
                <h2 class="section-title">Portfolio</h2>
                <p class="section-subtitle">Alguns dos meus projetos mais recentes</p>
            </div>
        </div>
        
        <!-- Portfolio Filter -->
        <div class="row">
            <div class="col-lg-12" data-aos="fade-up" data-aos-delay="100">
                <div class="portfolio-filter">
                    <button class="filter-btn active" data-filter="all">Todos</button>
                    <button class="filter-btn" data-filter="frontend">Frontend</button>
                    <button class="filter-btn" data-filter="backend">Backend</button>
                    <button class="filter-btn" data-filter="fullstack">Full Stack</button>
                </div>
            </div>
        </div>
        
        <!-- Portfolio Grid -->
        <div class="row portfolio-grid" id="portfolioGrid">
            {% for project in all_projects %}
            <div class="col-lg-4 col-md-6 mb-4 portfolio-item" data-category="{{ project.category }}" data-aos="fade-up" data-aos-delay="{{ loop.index * 100 }}">
                <div class="portfolio-card">
                    <div class="portfolio-image">
                        <img src="{{ project.image_url or '/static/images/project-placeholder.svg' }}" alt="{{ project.title }}" class="img-fluid">
                        <div class="portfolio-overlay">
                            <div class="portfolio-links">
                                {% if project.live_url %}
                                <a href="{{ project.live_url }}" target="_blank" class="portfolio-link">
                                    <i class="fas fa-external-link-alt"></i>
                                </a>
                                {% endif %}
                                {% if project.github_url %}
                                <a href="{{ project.github_url }}" target="_blank" class="portfolio-link">
                                    <i class="fab fa-github"></i>
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="portfolio-content">
                        <h5 class="portfolio-title">{{ project.title }}</h5>
                        <p class="portfolio-description">{{ project.short_description }}</p>
                        <div class="portfolio-tech">
                            {% for tech in project.technologies.split(',') %}
                            <span class="tech-tag">{{ tech.strip() }}</span>
                            {% endfor %}
                        </div>
                        
                        <!-- Project Interactions -->
                        <div class="portfolio-interactions mt-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="project-stats">
                                    <span class="like-count">{{ project.likes_count }} curtida{{ 's' if project.likes_count != 1 else '' }}</span>
                                </div>
                                
                                {% if current_user.is_authenticated %}
                                <div class="interaction-buttons">
                                    <button class="btn btn-sm like-btn {{ 'liked' if project.is_liked_by(current_user) else '' }}" 
                                            data-project-id="{{ project.id }}" 
                                            onclick="toggleLike({{ project.id }})">
                                        <i class="fas fa-heart"></i>
                                        <span class="like-text">{{ 'Descurtir' if project.is_liked_by(current_user) else 'Curtir' }}</span>
                                    </button>
                                    <button class="btn btn-sm btn-outline-primary ms-2" 
                                            data-bs-toggle="modal" 
                                            data-bs-target="#commentModal{{ project.id }}">
                                        <i class="fas fa-comment"></i> Comentar
                                    </button>
                                </div>
                                {% else %}
                                <div class="interaction-info">
                                    <small class="text-muted">
                                        <a href="{{ url_for('login') }}" class="text-decoration-none">Faça login</a> para curtir e comentar
                                    </small>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Comment Modal -->
                {% if current_user.is_authenticated %}
                <div class="modal fade" id="commentModal{{ project.id }}" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content glass-card">
                            <div class="modal-header border-0">
                                <h5 class="modal-title">Comentar - {{ project.title }}</h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="{{ url_for('add_comment', project_id=project.id) }}">
                                    <div class="form-group mb-3">
                                        <textarea class="form-control glass-input" 
                                                name="content" 
                                                rows="4" 
                                                placeholder="Escreva seu comentário..."
                                                required
                                                minlength="5"
                                                maxlength="500"></textarea>
                                    </div>
                                    <div class="text-end">
                                        <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancelar</button>
                                        <button type="submit" class="btn btn-primary">Comentar</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Experience Section -->
<section id="experience" class="experience-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center" data-aos="fade-up">
                <h2 class="section-title">Experiência</h2>
                <p class="section-subtitle">Minha trajetória profissional</p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-lg-12">
                <div class="timeline">
                    {% for experience in experiences %}
                    <div class="timeline-item" data-aos="fade-up" data-aos-delay="{{ loop.index * 100 }}">
                        <div class="timeline-marker"></div>
                        <div class="timeline-content">
                            <div class="timeline-header">
                                <h4 class="timeline-title">{{ experience.position }}</h4>
                                <h5 class="timeline-company">
                                    {% if experience.company_url %}
                                    <a href="{{ experience.company_url }}" target="_blank">{{ experience.company }}</a>
                                    {% else %}
                                    {{ experience.company }}
                                    {% endif %}
                                </h5>
                                <div class="timeline-date">
                                    {{ experience.start_date.strftime('%b %Y') }} - 
                                    {% if experience.end_date %}
                                        {{ experience.end_date.strftime('%b %Y') }}
                                    {% else %}
                                        Presente
                                    {% endif %}
                                </div>
                                {% if experience.location %}
                                <div class="timeline-location">
                                    <i class="fas fa-map-marker-alt"></i>
                                    {{ experience.location }}
                                </div>
                                {% endif %}
                            </div>
                            <p class="timeline-description">{{ experience.description }}</p>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="contact-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center" data-aos="fade-up">
                <h2 class="section-title">Entre em Contato</h2>
                <p class="section-subtitle">Vamos conversar sobre seu próximo projeto</p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="contact-form-container" data-aos="fade-up" data-aos-delay="200">
                    <form method="POST" action="{{ url_for('contact') }}" class="contact-form" id="contactForm">
                        {{ contact_form.hidden_tag() }}
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                {{ contact_form.name.label(class="form-label") }}
                                {{ contact_form.name(class="form-control") }}
                            </div>
                            <div class="col-md-6 mb-3">
                                {{ contact_form.email.label(class="form-label") }}
                                {{ contact_form.email(class="form-control") }}
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            {{ contact_form.subject.label(class="form-label") }}
                            {{ contact_form.subject(class="form-control") }}
                        </div>
                        
                        <div class="mb-4">
                            {{ contact_form.message.label(class="form-label") }}
                            {{ contact_form.message(class="form-control", rows="5") }}
                        </div>
                        
                        <div class="text-center">
                            {{ contact_form.submit(class="btn btn-primary btn-lg") }}
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Contact Info -->
        <div class="row mt-5">
            <div class="col-lg-4 text-center" data-aos="fade-up" data-aos-delay="100">
                <div class="contact-info-item">
                    <div class="contact-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <h5>Email</h5>
                    <p><a href="mailto:dev@example.com">dev@example.com</a></p>
                </div>
            </div>
            <div class="col-lg-4 text-center" data-aos="fade-up" data-aos-delay="200">
                <div class="contact-info-item">
                    <div class="contact-icon">
                        <i class="fab fa-linkedin"></i>
                    </div>
                    <h5>LinkedIn</h5>
                    <p><a href="https://linkedin.com/in/dev" target="_blank">linkedin.com/in/dev</a></p>
                </div>
            </div>
            <div class="col-lg-4 text-center" data-aos="fade-up" data-aos-delay="300">
                <div class="contact-info-item">
                    <div class="contact-icon">
                        <i class="fab fa-github"></i>
                    </div>
                    <h5>GitHub</h5>
                    <p><a href="https://github.com/dev" target="_blank">github.com/dev</a></p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Additional JavaScript -->
<script>
// Toggle like function
function toggleLike(projectId) {
    fetch(`/project/${projectId}/like`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        }
    })
    .then(response => response.json())
    .then(data => {
        const likeBtn = document.querySelector(`[data-project-id="${projectId}"]`);
        const likeCount = likeBtn.closest('.portfolio-card').querySelector('.like-count');
        const likeText = likeBtn.querySelector('.like-text');
        
        if (data.liked) {
            likeBtn.classList.add('liked');
            likeText.textContent = 'Descurtir';
        } else {
            likeBtn.classList.remove('liked');
            likeText.textContent = 'Curtir';
        }
        
        likeCount.textContent = `${data.likes_count} curtida${data.likes_count !== 1 ? 's' : ''}`;
    })
    .catch(error => {
        console.error('Erro ao curtir projeto:', error);
        alert('Erro ao processar sua ação. Tente novamente.');
    });
}
</script>

<style>
/* Portfolio interaction styles */
.portfolio-interactions {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding-top: 15px;
}

.like-btn {
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--text-secondary);
    transition: all 0.3s ease;
}

.like-btn:hover {
    background: rgba(59, 130, 246, 0.1);
    border-color: var(--primary-color);
    color: var(--primary-color);
}

.like-btn.liked {
    background: var(--primary-color);
    border-color: var(--primary-color);
    color: white;
}

.like-btn.liked:hover {
    background: var(--primary-dark);
}

.project-stats {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.interaction-info small {
    color: var(--text-muted);
}

.glass-dropdown {
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    box-shadow: var(--shadow-medium);
}

.glass-dropdown .dropdown-item {
    color: var(--text-primary);
    transition: all 0.3s ease;
}

.glass-dropdown .dropdown-item:hover {
    background: rgba(59, 130, 246, 0.1);
    color: var(--primary-color);
}

/* Skills Carousel Styles */
.skills-carousel-slide {
    padding: 40px 20px;
}

.skills-category-header .category-title {
    color: var(--text-primary);
    font-size: 2rem;
    margin: 20px 0 10px 0;
}

.skills-category-header .category-subtitle {
    color: var(--text-secondary);
    font-size: 1.1rem;
}

.skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 30px;
    max-width: 1000px;
    margin: 0 auto;
}

.skill-card {
    padding: 30px 20px;
    text-align: center;
    transition: all 0.3s ease;
    border-radius: 20px;
}

.skill-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(59, 130, 246, 0.2);
}

.skill-icon {
    font-size: 3rem;
    color: var(--primary-color);
    margin-bottom: 15px;
}

.skill-name {
    color: var(--text-primary);
    margin-bottom: 15px;
    font-weight: 600;
}

.skill-level {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.level-indicator {
    display: flex;
    gap: 8px;
}

.level-indicator .dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
}

.level-indicator .dot.filled {
    background: var(--primary-color);
    box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
}

.level-text {
    color: var(--text-secondary);
    font-size: 0.9rem;
    font-weight: 500;
}

/* Custom Carousel Controls */
.carousel-control-prev,
.carousel-control-next {
    width: 50px;
    height: 50px;
    background: var(--glass-bg);
    border-radius: 50%;
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    top: 50%;
    transform: translateY(-50%);
}

.carousel-control-prev {
    left: -60px;
}

.carousel-control-next {
    right: -60px;
}

.carousel-control-prev:hover,
.carousel-control-next:hover {
    background: var(--primary-color);
}

.carousel-indicators {
    bottom: -50px;
}

.carousel-indicators button {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    border: none;
    margin: 0 5px;
}

.carousel-indicators button.active {
    background: var(--primary-color);
}

@media (max-width: 768px) {
    .carousel-control-prev,
    .carousel-control-next {
        width: 40px;
        height: 40px;
    }
    
    .carousel-control-prev {
        left: -30px;
    }
    
    .carousel-control-next {
        right: -30px;
    }
    
    .skills-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
}
</style>
{% endblock %}
